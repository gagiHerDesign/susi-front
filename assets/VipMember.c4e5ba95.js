import{Q as V}from"./QImg.b3983bf5.js";import{E as y,G as Q,H as k,j as S,J as M,K as n,l,d as o,S as r,L as u,R as d,bv as c,aM as i,Q as U,b6 as B,V as m}from"./index.38940f2a.js";import{Q as C}from"./QForm.48930b54.js";import{Q as I}from"./QPage.2b1c75cb.js";import{v as P}from"./index.e42b89b3.js";const q={class:"container"},z=l("h6",{style:{"font-weight":"600"}},"\u6703\u54E1\u4E2D\u5FC3",-1),A={class:"row"},$={class:"col-6 flex flex-center"},j=l("p",{class:"q-ma-xl",style:{"font-weight":"600","font-size":"25px"}}," \u6B61\u8FCE\u4F86\u5230SUSI\u6703\u54E1\u4E2D\u5FC3 ! ",-1),F={class:"col-6"},N={class:"input col-12"},R={class:"input col-12"},T={class:"input col-12"},E={class:"input col-12"},G={class:"col-12 flex justify-center"},O={__name:"VipMember",setup(H){const h=y(),{avatars:_,email:f,phone:b,address:v,birth:g,gender:x}=Q(h),p={phone(a){return P.isMobilePhone(a,"zh-TW")||"\u624B\u6A5F\u865F\u78BC\u683C\u5F0F\u932F\u8AA4"},length(a){return a.length>=4&&a.length<=12||"\u9577\u5EA6\u5FC5\u9808\u70BA 4 ~ 12 \u500B\u5B57"},text(a){return a.length>=1&&a.length<=20||"\u586B\u5BEB\u5167\u5BB9\u5F8C\u624D\u80FD\u8CFC\u7269\u54E6"}},e=k({phone:b.value||"",address:v.value||"",birth:g.value||"",gender:x.value,password:"",image:void 0,loading:!1}),w=async()=>{var a,t;e.loading=!0;try{const{data:s}=await B.patch("/users/editMyself",{phone:e.phone,address:e.address,birth:e.birth,gender:e.gender,password:e.password});e.phone=s.result.phone,e.address=s.result.address,e.birth=s.result.birth,e.gender=s.result.gender,e.password=s.result.password,m.fire({icon:"success",title:"\u6210\u529F",text:"\u4FEE\u6539\u6210\u529F"})}catch(s){m.fire({icon:"error",title:"\u5931\u6557",text:((t=(a=s==null?void 0:s.response)==null?void 0:a.data)==null?void 0:t.message)||"\u767C\u751F\u932F\u8AA4"})}e.loading=!1};return(a,t)=>(S(),M(I,{id:"vipMember",class:"bg"},{default:n(()=>[l("div",q,[z,o(C,{onSubmit:w},{default:n(()=>[l("div",A,[l("div",$,[o(r,{size:"150px"},{default:n(()=>[o(V,{src:u(_)},null,8,["src"])]),_:1}),j]),l("div",F,[l("div",N,[o(d,{"bottom-slots":"",label:u(f)},{prepend:n(()=>[o(r,{icon:"mail"})]),_:1},8,["label"])]),l("div",R,[o(d,{"bottom-slots":"",modelValue:e.phone,"onUpdate:modelValue":t[1]||(t[1]=s=>e.phone=s),label:"Phone",rules:[p.phone]},c({prepend:n(()=>[o(r,{icon:"call"})]),_:2},[e.phone?{name:"append",fn:n(()=>[o(i,{name:"close",onClick:t[0]||(t[0]=s=>e.phone=""),class:"cursor-pointer"})]),key:"0"}:void 0]),1032,["modelValue","rules"])]),l("div",T,[o(d,{"bottom-slots":"",modelValue:e.address,"onUpdate:modelValue":t[3]||(t[3]=s=>e.address=s),label:"Address",rules:[p.text]},c({prepend:n(()=>[o(r,{icon:"home"})]),_:2},[e.address?{name:"append",fn:n(()=>[o(i,{name:"close",onClick:t[2]||(t[2]=s=>e.address=""),class:"cursor-pointer"})]),key:"0"}:void 0]),1032,["modelValue","rules"])]),l("div",E,[o(d,{"bottom-slots":"",modelValue:e.password,"onUpdate:modelValue":t[5]||(t[5]=s=>e.password=s),label:"Password",rules:[p.length]},{prepend:n(()=>[o(i,{name:"mdi-lock-reset"})]),append:n(()=>[o(i,{name:"close",onClick:t[4]||(t[4]=s=>e.password=""),class:"cursor-pointer"})]),_:1},8,["modelValue","rules"])]),l("div",G,[o(U,{class:"submit_btn q-px-xl q-py-md",color:"primary",label:"\u78BA\u8A8D\u4FEE\u6539",type:"submit"})])])])]),_:1})])]),_:1}))}};export{O as default};
